// ì†Œìˆ˜ ì°¾ê¸°

/**
 * âœï¸ ë¬¸ì œ ê°œìš”
 * ë¬¸ìì—´ í˜•íƒœì˜ ìˆ«ì ì¡°ê°ë“¤ì„ ì¡°í•©í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  ìˆ˜ ì¤‘ì—ì„œ, ì†Œìˆ˜ì¸ ìˆ˜ê°€ ëª‡ ê°œì¸ì§€ êµ¬í•˜ëŠ” ë¬¸ì œ
 *
 * âœï¸ ëª©í‘œ
 * - ë¬¸ìì—´ numbersë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ëª¨ë“  "ì¡°í•©ëœ ìˆ«ì"ë¥¼ êµ¬í•¨
 * - ê° ìˆ«ì ì¤‘ ì¤‘ë³µ ì—†ì´ ì†Œìˆ˜ë§Œ ì„¸ì„œ ê°œìˆ˜ ë°˜í™˜
 *
 * âœï¸ ì˜ˆìƒ ë¡œì§
 * 1. numbersì˜ ëª¨ë“  ìë¦¿ìˆ˜ ì¡°í•©(ìˆœì—´)ì„ ë§Œë“ ë‹¤ (1~numbers.length)
 * 2. ì¡°í•©ëœ ìˆ˜ë“¤ì„ Setì— ì €ì¥í•´ ì¤‘ë³µ ì œê±°
 * 3. ê°ê°ì´ ì†Œìˆ˜ì¸ì§€ íŒë³„ (isPrime í•¨ìˆ˜)
 * 4. ì†Œìˆ˜ì¸ ê°œìˆ˜ë¥¼ ë¦¬í„´
 *
 * ... í•µì‹¬ì€ "ëª¨ë“  ìˆœì—´ ìƒì„±" + "ì¤‘ë³µ ì œê±°" + "ì†Œìˆ˜ íŒë³„"
 */

// í’€ì´ ì½”ë“œ
// 1ï¸âƒ£ ëª¨ë“  ìˆ«ì ì¡°í•© ë§Œë“¤ê¸°
function getPermutations(arr, r) {
  //
  /** (1)
   * - rì´ 1ì¼ ë•. ìˆ«ì í•˜ë‚˜ë§Œ ì½”ë“œë©´ë˜ë‹ˆ [v]ë¡œ ë°˜í™˜!(ë” ë½‘ì„ ìˆ«ìê°€ 1ê°œ ë‚¨ì•˜ìœ¼ë©´, ê·¸ëƒ¥ ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ [v]ì²˜ëŸ¼ ë¬¶ì–´ì„œ ë¦¬í„´)
   * - ì˜ˆ: arr = [1, 2], r = 1 => [[1], [2]]
   */
  if (r === 1) return arr.map((v) => [v]);
  const result = [];

  /** (2)
   * - ë°˜ë³µë¬¸ìœ¼ë¡œ ìˆœì—´ ìƒì„± ì‹œì‘! => arrì—ì„œ í•œ ìš”ì†Œì”© ë½‘ê¸°(ì—¬ê¸°ì—ì„œ fixedëŠ” ë§¨ ì•ì— ê³ ì •)
   * - ì˜ˆ: [1,2,3]ì´ë©´ í•œ ë²ˆì€ 1, ë‹¤ìŒì€ 2, ë‹¤ìŒì€ 3ì´ fixed
   */
  arr.forEach((fixed, idx) => {
    /** (3)
     * - ìˆ«ì í•˜ë‚˜ë¥¼ ê³ ì •(fixed)í•˜ê³ , ê³ ì •í•œ ìˆ«ìë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ë¥¼ restì— ë‹´ìŒ
     * - ì˜ˆ: fixed = 2, arr = [1,2,3] â†’ rest = [1,3]
     */
    const rest = [...arr.slice(0, idx), ...arr.slice(idx + 1)];

    /** (4)
     * - ê³ ì •í•œ ìˆ«ìë¥¼ ì•ì—ë‘ê³  ì¡°í•©ì„ ë§Œë“  ë‹¤ìŒ resultì— Push
     * - ì¦‰, ë‚¨ì€ ìˆ«ìë“¤(rest)ë¡œ ë‚¨ì€ ìë¦¬ ìˆ˜ë§Œí¼ ìˆœì—´ì„ êµ¬í•¨! === ì´ê²Œ ì¬ê·€í˜¸ì¶œ
     */
    const perms = getPermutations(rest, r - 1);
    /** (5)
     * - ë°©ê¸ˆ ë½‘ì€ fixed ìˆ«ìë¥¼ ì•ì— ë¶™ì—¬ì„œ ìˆœì—´ ì¡°í•©ì„ ì™„ì„±
     * - ì˜ˆ: fixed = 2, perms = [[1,3], [3,1]] â†’ attached = [[2,1,3], [2,3,1]]
     */
    const attached = perms.map((p) => [fixed, ...p]);
    // ê²°ê³¼ ë¦¬í„´
    result.push(...attached);
  });

  return result;
}

function solution(numbers) {
  const numPieces = numbers.split('');
  const numberSet = new Set();

  // 2ï¸âƒ£ 1ìë¦¬ë¶€í„° ì „ì²´ ìë¦¬ê¹Œì§€ ì¡°í•© ë§Œë“¤ê¸°
  for (let i = 1; i <= numPieces.length; i++) {
    const perms = getPermutations(numPieces, i);
    perms.forEach((perm) => numberSet.add(Number(perm.join(''))));
  }

  // 3ï¸âƒ£ ì†Œìˆ˜ íŒë³„ í•¨ìˆ˜
  const isPrime = (n) => {
    if (n === 2) return true;
    if (n < 2 || n % 2 === 0) return false;

    const sqrt = Math.sqrt(n);
    for (let i = 3; i <= sqrt; i += 2) {
      if (n % i === 0) return false;
    }
    return true;
  };

  return [...numberSet].filter(isPrime).length;
}

/** ğŸ“– í’€ì´ ê³¼ì •
 * 1ï¸âƒ£ ëª¨ë“  ìˆ«ì ì¡°í•© ë§Œë“¤ê¸°
 * - ì£¼ì–´ì§„ arr(ë‚¨ì€ ìˆ«ì ì¡°ê°)ì—ì„œ lenê¸¸ì´ë§Œí¼ ìˆœì—´ì„ ìƒì„±í•˜ëŠ” ì¬ê·€ í•¨ìˆ˜
 * - currentëŠ” ì§€ê¸ˆê¹Œì§€ ë§Œë“  ìˆ«ì ì¡°í•© ë¬¸ìì—´
 * - ìˆ«ìë¥¼ í•˜ë‚˜ ê³ ë¥´ê³  â†’ ë‚˜ë¨¸ì§€ì—ì„œ ì¬ê·€ í˜¸ì¶œ â†’ ê¸¸ì´ë§Œí¼ ë˜ë©´ Setì— ì €ì¥!
 *
 * 2ï¸âƒ£ 1ìë¦¬ë¶€í„° ì „ì²´ ìë¦¬ê¹Œì§€ ì¡°í•© ë§Œë“¤ê¸°
 * - ìˆ«ì ì¡°ê°ì„ 1ìë¦¬ë¶€í„° ì „ì²´ ìë¦¬ê¹Œì§€ ì¡°í•©í•˜ê¸°
 * - 1ìë¦¬ ìˆ«ì, 2ìë¦¬ ìˆ«ì, ..., ì „ì²´ ê¸¸ì´ ìˆ«ìê¹Œì§€ ëª¨ë‘ ì‹œë„!
 * - ì´ ë‹¨ê³„ì—ì„œ numberSet ì•ˆì— ê°€ëŠ¥í•œ ëª¨ë“  ì¡°í•© ìˆ«ìê°€ ë“¤ì–´ê°.
 *
 * 3ï¸âƒ£ ì†Œìˆ˜ íŒë³„ í•¨ìˆ˜
 * - 2ì™€ ì§ìˆ˜ë¥¼ ë¹ ë¥´ê²Œ ì œì™¸í•˜ê³ , 3ë¶€í„° nê¹Œì§€ í™€ìˆ˜ë§Œ ë‚˜ëˆ ë³´ë©° ì†Œìˆ˜ì¸ì§€ í™•ì¸
 */
